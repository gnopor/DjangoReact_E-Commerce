{"ast":null,"code":"var _jsxFileName = \"/home/gnop/Videos/django-react-boilerplate/src/containers/Profile.js\";\nimport React from 'react';\nimport { Grid, Header, Dimmer, Loader, Message, Segment, Image, Divider, Menu, Form, Select } from 'semantic-ui-react';\nimport { authAxios } from '../utils';\nimport { addressListURL, countryListURL, addressCreateURL, userIDURL } from '../constants';\n\nclass Profile extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      activeItem: \"billingAddress\",\n      error: null,\n      loading: false,\n      addresses: [],\n      formData: {\n        default: false\n      },\n      countries: [],\n      saving: false,\n      success: false,\n      userID: null\n    };\n\n    this.handleItemClick = name => {\n      this.setState({\n        activeItem: name\n      });\n    };\n\n    this.handleFormatCountries = countries => {\n      const keys = Object.keys(countries);\n      return keys.map(k => {\n        return {\n          key: k,\n          text: countries[k],\n          value: k\n        };\n      });\n    };\n\n    this.handleFetchCountries = () => {\n      authAxios.get(countryListURL).then(res => {\n        this.setState({\n          countries: this.handleFormatCountries(res.data)\n        });\n      }).catch(err => {\n        this.setState({\n          error: err\n        });\n      });\n    };\n\n    this.handleFetchUserID = () => {\n      authAxios.get(userIDURL).then(res => {\n        this.setState({\n          userID: res.data.userID\n        });\n        console.log(this.state.userID);\n      }).catch(err => {\n        this.setState({\n          error: err\n        });\n      });\n    };\n\n    this.handleFetchAddresses = () => {\n      this.setState({\n        loading: true\n      });\n      authAxios.get(addressListURL).then(res => {\n        this.setState({\n          addresses: res.data,\n          loading: false\n        });\n      }).catch(err => {\n        this.setState({\n          error: err\n        });\n      });\n    };\n\n    this.handleChange = e => {\n      const {\n        formData\n      } = this.state;\n      const updateFormData = { ...formData,\n        [e.target.name]: e.target.value\n      };\n      this.setState({\n        formData: updateFormData\n      });\n    };\n\n    this.handleSelectChange = (e, {\n      name,\n      value\n    }) => {\n      const {\n        formData\n      } = this.state;\n      const updateFormData = { ...formData,\n        [name]: value\n      };\n      this.setState({\n        formData: updateFormData\n      });\n    };\n\n    this.handleToggleDefault = () => {\n      const {\n        formData\n      } = this.state;\n      const updateFormData = { ...formData,\n        default: !formData.default\n      };\n      this.setState({\n        formData: updateFormData\n      });\n    };\n\n    this.handleCreateAddress = e => {\n      e.preventDefault();\n      const {\n        activeItem,\n        formData,\n        userID\n      } = this.state;\n      authAxios.post(addressCreateURL, { ...formData,\n        user: userID,\n        address_type: activeItem === \"billingAddress\" ? \"B\" : \"S\"\n      }).then(res => {\n        this.setState({\n          saving: true,\n          success: true\n        });\n      }).catch(err => {\n        this.setState({\n          error: err\n        });\n        console.log(formData);\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.handleFetchAddresses();\n    this.handleFetchCountries();\n    this.handleFetchUserID();\n  }\n\n  render() {\n    const {\n      activeItem,\n      error,\n      loading,\n      addresses,\n      countries,\n      saving,\n      success\n    } = this.state;\n    return /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      columns: 2,\n      divided: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Grid.Row, {\n      columns: 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Grid.Column, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 21\n      }\n    }, error && /*#__PURE__*/React.createElement(Message, {\n      error: true,\n      header: \"There was an error\",\n      content: JSON.stringify(error),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 29\n      }\n    }), loading && /*#__PURE__*/React.createElement(Segment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Dimmer, {\n      active: true,\n      inverted: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(Loader, {\n      inverted: true,\n      content: \"Loading\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 41\n      }\n    })), /*#__PURE__*/React.createElement(Image, {\n      src: \"https://react.semantic-ui.com/images/wireframe/short-paragraph.png\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 37\n      }\n    })), addresses.map(a => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 36\n        }\n      }, a.street_address);\n    }))), /*#__PURE__*/React.createElement(Grid.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Grid.Column, {\n      width: 6,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Menu, {\n      pointing: true,\n      vertical: true,\n      fluid: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Menu.Item, {\n      name: \"Billing Address\",\n      active: activeItem === \"billingAddress\",\n      onClick: () => this.handleItemClick(\"billingAddress\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(Menu.Item, {\n      name: \"Shipping Address\",\n      active: activeItem === \"shippingAddress\",\n      onClick: () => this.handleItemClick(\"shippingAddress\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 29\n      }\n    }))), /*#__PURE__*/React.createElement(Grid.Column, {\n      width: 10,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 25\n      }\n    }, `Update your ${activeItem === \"billingAddress\" ? \"billing\" : \"shipping\"} address`), /*#__PURE__*/React.createElement(Divider, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Form, {\n      onSubmit: this.handleCreateAddress,\n      success: success,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Form.Input, {\n      required: true,\n      name: \"street_address\",\n      placeholder: \"Street address\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(Form.Input, {\n      required: true,\n      name: \"appartement_address\",\n      placeholder: \"Appartement address\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(Form.Field, {\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Select, {\n      loading: countries.length < 1,\n      clearable: true,\n      search: true,\n      options: countries,\n      fluid: true,\n      name: \"country\",\n      placeholder: \"Country\",\n      onChange: this.handleSelectChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(Form.Input, {\n      required: true,\n      name: \"zip\",\n      placeholder: \"Zip code\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(Message, {\n      success: true,\n      header: \"Success!\",\n      content: \"Your address was saved\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(Form.Checkbox, {\n      name: \"default\",\n      label: \"Make this the default address\",\n      onChange: this.handleToggleDefault,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(Form.Button, {\n      primary: true,\n      disabled: saving,\n      loading: saving,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 29\n      }\n    }, \"Save\")))));\n  }\n\n}\n\nexport default Profile;","map":{"version":3,"sources":["/home/gnop/Videos/django-react-boilerplate/src/containers/Profile.js"],"names":["React","Grid","Header","Dimmer","Loader","Message","Segment","Image","Divider","Menu","Form","Select","authAxios","addressListURL","countryListURL","addressCreateURL","userIDURL","Profile","Component","state","activeItem","error","loading","addresses","formData","default","countries","saving","success","userID","handleItemClick","name","setState","handleFormatCountries","keys","Object","map","k","key","text","value","handleFetchCountries","get","then","res","data","catch","err","handleFetchUserID","console","log","handleFetchAddresses","handleChange","e","updateFormData","target","handleSelectChange","handleToggleDefault","handleCreateAddress","preventDefault","post","user","address_type","componentDidMount","render","JSON","stringify","a","street_address","length"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Grid, Header, Dimmer, Loader, Message, Segment, Image, Divider, Menu, Form, Select } from 'semantic-ui-react';\nimport { authAxios } from '../utils';\nimport { addressListURL, countryListURL, addressCreateURL, userIDURL } from '../constants';\n\nclass Profile extends React.Component {\n    state = {\n        activeItem: \"billingAddress\",\n        error: null,\n        loading: false,\n        addresses: [],\n        formData: { default: false },\n        countries: [],\n        saving: false,\n        success: false,\n        userID: null\n    };\n\n    componentDidMount() {\n        this.handleFetchAddresses();\n        this.handleFetchCountries();\n        this.handleFetchUserID();\n    }\n\n    handleItemClick = (name) => {\n        this.setState({\n            activeItem: name\n        });\n    }\n\n    handleFormatCountries = countries => {\n        const keys = Object.keys(countries);\n        return keys.map(k => {\n            return {\n                key: k,\n                text: countries[k],\n                value: k\n            };\n        });\n    };\n\n\n    handleFetchCountries = () => {\n        authAxios\n            .get(countryListURL)\n            .then(res => {\n                this.setState({ countries: this.handleFormatCountries(res.data) });\n            })\n            .catch(err => {\n                this.setState({ error: err });\n            });\n    };\n\n    handleFetchUserID = () => {\n        authAxios\n            .get(userIDURL)\n            .then(res => {\n                this.setState({ userID: res.data.userID });\n                console.log(this.state.userID);\n            })\n            .catch(err => {\n                this.setState({ error: err });\n            });\n    };\n\n    handleFetchAddresses = () => {\n        this.setState({ loading: true });\n\n        authAxios\n            .get(addressListURL)\n            .then(res => {\n                this.setState({ addresses: res.data, loading: false });\n            })\n            .catch(err => {\n                this.setState({ error: err });\n            });\n    };\n\n\n    handleChange = e => {\n        const { formData } = this.state;\n        const updateFormData = {\n            ...formData,\n            [e.target.name]: e.target.value\n        };\n        this.setState({\n            formData: updateFormData\n        });\n    };\n\n\n    handleSelectChange = (e, { name, value }) => {\n        const { formData } = this.state;\n        const updateFormData = {\n            ...formData,\n            [name]: value\n        };\n        this.setState({\n            formData: updateFormData\n        });\n    };\n\n\n    handleToggleDefault = () => {\n        const { formData } = this.state;\n        const updateFormData = {\n            ...formData,\n            default: !formData.default\n        };\n        this.setState({\n            formData: updateFormData\n        });\n    };\n    handleCreateAddress = e => {\n        e.preventDefault();\n        const { activeItem, formData, userID } = this.state;\n        authAxios\n            .post(addressCreateURL, {\n                ...formData,\n                user: userID,\n                address_type: activeItem === \"billingAddress\" ? \"B\" : \"S\"\n            })\n            .then(res => {\n                this.setState({ saving: true, success: true });\n            })\n            .catch(err => {\n                this.setState({ error: err });\n                console.log(formData);\n            });\n\n    };\n\n    render() {\n        const { activeItem, error, loading, addresses, countries, saving, success } = this.state;\n        return (\n            <Grid container columns={2} divided>\n                <Grid.Row columns={1}>\n                    <Grid.Column>\n                        {error && (\n                            <Message\n                                error\n                                header='There was an error'\n                                content={JSON.stringify(error)}\n                            />\n                        )}\n                        {\n                            loading && (\n                                <Segment>\n                                    <Dimmer active inverted>\n                                        <Loader inverted content='Loading' />\n                                    </Dimmer>\n\n                                    <Image src='https://react.semantic-ui.com/images/wireframe/short-paragraph.png' />\n                                </Segment>\n                            )\n                        }\n                        {addresses.map(a => {\n                            return <div>{a.street_address}</div>;\n                        })}\n                    </Grid.Column>\n                </Grid.Row>\n                <Grid.Row>\n                    <Grid.Column width={6}>\n\n                        <Menu pointing vertical fluid>\n                            <Menu.Item\n                                name=\"Billing Address\"\n                                active={activeItem === \"billingAddress\"}\n                                onClick={() => this.handleItemClick(\"billingAddress\")}\n                            />\n                            <Menu.Item\n                                name=\"Shipping Address\"\n                                active={activeItem === \"shippingAddress\"}\n                                onClick={() => this.handleItemClick(\"shippingAddress\")}\n                            />\n                        </Menu>\n\n                    </Grid.Column>\n                    <Grid.Column width={10}>\n                        <Header>\n                            {`Update your ${activeItem === \"billingAddress\" ? \"billing\" : \"shipping\"} address`}\n                        </Header>\n                        <Divider />\n                        <Form onSubmit={this.handleCreateAddress} success={success}>\n                            <Form.Input\n                                required\n                                name=\"street_address\"\n                                placeholder=\"Street address\"\n                                onChange={this.handleChange}\n\n                            />\n                            <Form.Input\n                                required\n                                name=\"appartement_address\"\n                                placeholder=\"Appartement address\"\n                                onChange={this.handleChange}\n\n                            />\n                            <Form.Field required>\n                                <Select\n                                    loading={countries.length < 1}\n                                    clearable\n                                    search\n                                    options={countries}\n                                    fluid\n                                    name=\"country\"\n                                    placeholder=\"Country\"\n                                    onChange={this.handleSelectChange}\n                                />\n                            </Form.Field>\n                            <Form.Input\n                                required\n                                name=\"zip\"\n                                placeholder=\"Zip code\"\n                                onChange={this.handleChange}\n\n                            />\n                            <Message\n                                success\n                                header=\"Success!\"\n                                content=\"Your address was saved\"\n                            />\n                            <Form.Checkbox\n                                name=\"default\"\n                                label=\"Make this the default address\"\n                                onChange={this.handleToggleDefault}\n                            />\n                            <Form.Button primary disabled={saving} loading={saving}>Save</Form.Button>\n\n                        </Form>\n                    </Grid.Column>\n                </Grid.Row>\n            </Grid>\n        );\n    }\n}\n\nexport default Profile;"]},"metadata":{},"sourceType":"module"}